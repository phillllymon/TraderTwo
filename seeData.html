<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Two-Column Dataset Graphs</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .column {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .chart-container {
      width: 100%;
      height: 300px;
    }
  </style>
</head>
<body>
  <h1>Two-Column Dataset Graphs</h1>
  <div class="grid">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
  </div>

  <script>
    // bad
    const leftDatasets = [[8.28,8.18,8.15,8.18,8.14,8.11,8.05,8.16,8.14,8.26,8.18,8.2,8.22,8.2,8.28,8.44,8.3798,8.42,8.38,8.32,8.24,8.34,8.4,8.44,8.42,8.52,8.58,8.47,8.46,8.52,8.4402,8.58,8.58,8.68,8.7,8.66,8.7,8.68],[22.3,22.91,20.5,21.7033,20.48,20.61,20.2,17.72,17.0601,16.38,17.34,18.205,18,18.08,18.4,18.76,18.4625,18.62,18.53,18.25,19.565,19.735,19.64,19.8924,20.6,20.0695,20.57,20.645,22.2288,21.9999,21.6601,21,20.81,20.695,20.5764,20.2718,20.89,20.296],[5.45,5.502,5.54,5.39,5.56,5.645,5.795,5.95,6.1,6.06,6.175,6.17,5.875,5.87,5.84,5.745,5.94,6.015,5.97,5.915,5.89,5.835,5.875,5.7441,5.825,5.7775,5.855,5.825,5.79,5.78,5.79,5.79,5.82,5.82,5.825,5.85,5.905,5.905],[9.29,9.66,9.48,9.52,9.6,9.32,9.5198,9.42,9.4,9.54,9.48,9.7,9.96,10.46,11.18,11.7198,11.3,11.84,11.8,11.32,11.9202,11.56,11.92,12.37,11.92,11.54,11.9,11.76,11.68,11.76,12.46,11.82,12.04,12.178,12.2998,12.18,12.42,12.81],[8.3338,8.36,8.3,8.325,8.4083,8.335,8.38,8.415,8.3669,8.365,8.285,8.295,8.325,8.32,8.3019,8.2588,8.275,8.3,8.295,8.325,8.255,8.279,8.2801,8.275,8.265,8.245,8.255,8.255,8.255,8.22,8.245,8.2271,8.1799,8.175,8.165,8.175,8.315,8.335],[5.95,6.1093,6.04,5.2001,5.2444,5.16,5.28,5.27,5.25,5.4211,5.3516,5.3301,5.32,5.33,5.12,5.11,5.3887,5.35,5.44,5.42,5.415,5.41,5.365,5.37,5.305,5.305,5.54,5.584,5.53,5.5401,5.58,5.56,5.5518,5.56,5.55,5.5201,5.5152,5.33],[55.145,55.0096,56,56.985,57.76,57.7509,59.85,60.62,59.8,60.37,60.59,59.42,58.725,57.88,59.04,59.29,60.01,59.94,60.89,61.7,61.73,61.4,61.72,61.18,60.95,60.83,60.84,60.88,60.74,60.69,60.49,58.54,58.4,57.83,56.68,55.6665,54.69,54.5084],[6.022,6.048,6.77,7.224,7.028,7.296,7.14,7.136,6.988,7.058,7.1998,7.034,7.32,7.5,7.224,7.702,7.648,7.798,7.626,7.917,7.766,8.036,7.744,7.684,7.762,7.972,7.944,7.618,7.902,7.892,7.998,8.152,8.164,8.254,8.528,8.494,9.684,8.874],[7.12,7.105,7.11,7,6.84,6.97,6.865,6.89,6.8165,6.825,6.8097,6.8045,6.8227,6.785,6.7068,6.66,6.63,6.6201,6.6201,6.53,6.48,6.49,6.42,6.3,6.25,6.2,6.145,6.2099,6.31,6.2684,6.3001,6.33,6.3501,6.365,6.41,6.4426,6.48,6.48],[13.8,14.4399,14.33,14.405,13.9,13.55,14.75,15.26,16.2199,16.8902,17.6076,18.84,21.67,21.67,21.4715,21.93,24.15,23.8703,22.52,22.62,24.06,26.32,25.3425,28.2,26.29,23.66,23.0002,20.45,21.69,22.1799,21.708,20.15,21.2,21.0601,21.8311,23.41,22.9713,23.185],[11.725,11.72,11.7,11.71,11.71,11.73,11.725,11.695,11.72,11.705,11.73,11.74,11.74,11.72,11.71,11.69,11.695,11.7,11.7,11.71,11.7107,11.715,11.705,11.72,11.705,11.71,11.7,11.69,11.7,11.7,11.7,11.705,11.715,11.755,11.745,11.745,11.745,12.1],[16.9,17.09,17.105,17.13,17.01,17.11,17.135,17.15,17.055,17.07,17.365,17.38,17.28,17.265,17.3,17.302,17.275,17.27,17.32,17.335,17.26,17.3,17.335,17.35,17.38,17.37,17.38,17.38,17.31,17.32,17.4,17.31,17.355,17.39,17.35,17.33,17.61,17.6],[7.02,7.09,7.06,7.12,7.01,6.94,6.94,6.8884,6.835,6.81,6.82,6.78,6.79,6.84,6.85,6.95,7.058,7.04,7.045,6.985,6.97,6.95,6.95,6.99,7,6.98,6.99,7,7.02,7.07,7.12,7.1,7.095,7.09,7.11,7.1,7.095,7.045],[178.9,178.605,179.1,179.465,179.755,180,180.075,180.62,179.935,179.76,179.26,179.115,178.885,178.8,178.89,178.87,177.9,177.665,177.27,177.49,177.38,177.235,177.02,177.46,177.645,178.13,178.5,178.46,178.17,177.9725,178.26,178.26,178.16,178.125,178,177.91,177.8288,178.04],[22.2,22.15,22.6,23,22.2,22.775,23.143,22.301,22.8,23.191,22.8,22.9,23,23.406,23.398,23.3,23.6,23.328,23.665,23.354,23.65,23.05,23.1,23.206,24.001,24.252,23.819,23.75,23.8,23.95,24.383,24.796,25.583,25.747,27.901,27.001,28.711,27.4],[18.37,18.515,18.49,18.42,18.41,18.32,18.275,18.34,18.36,18.35,18.25,18.26,18.31,18.2201,18.205,18.185,18.185,18.175,18.21,18.135,18.2253,18.045,17.915,17.98,17.875,17.87,18,18.01,18.06,18.13,18.1305,18.22,18.105,18.16,18.1319,18.17,18.23,18.22],[5.5665,5.64,5.52,5.46,5.36,5.46,5.68,5.68,5.69,5.74,5.71,5.71,5.765,5.805,5.785,5.8,5.8,5.8,5.8803,5.85,5.76,5.8792,5.81,5.81,5.81,5.75,5.73,5.69,5.65,5.74,5.76,5.77,5.84,5.97,6.02,5.985,5.99,6.04],[22.29,22.19,22.25,22.36,22.42,22.4042,22.45,22.63,22.4901,22.28,22.5,22.49,22.52,22.3,22.2615,22.2,22.3,22.265,22.19,22.19,22.06,22.13,21.99,22.05,22.15,22.04,22.11,22.135,22.17,22.18,22.2361,22.125,22.15,22.24,22.15,22.2,22.43,22.4644],[7.87,7.69,7.765,7.3604,7.31,6.94,6.53,6.8007,6.9984,6.7481,6.11,5.88,6.24,6.12,6.23,6.25,6.28,6.21,6.2,6.1601,5.9012,6.0495,6.15,6.08,6.2,6.5,6.34,6.36,6.375,6.316,6.295,6.35,6.3874,6.33,6.23,6.0616,6.0993,6.1385],[9.07,8.93,8.98,9.0871,9.132,9.1119,9,8.9737,8.675,8.8,8.8532,8.75,8.8081,8.846,8.84,8.73,8.7432,8.6304,8.645,8.65,8.605,8.61,8.52,8.65,8.6912,8.735,8.8076,8.96,8.855,8.76,8.72,8.635,8.62,8.655,8.66,8.6,8.5031,8.52],[5.4,5.648,5.535,5.2694,5.08,5.1999,5.2,5.37,5.39,5.3299,5.44,5.4501,5.44,5.455,5.58,5.65,5.48,5.415,5.1301,5.03,5.2205,5.15,5.1712,5.2308,5.2199,5.3603,5.3401,5.225,5.16,5.21,5.2799,5.32,5.2843,5.26,5.23,5.29,5.3688,5.38],[28.85,28,28.55,28.2,27.46,27.225,27.01,27.24,27.335,28.6489,28.42,29.15,29.32,29.01,28.9,28.585,28.62,28.61,28.75,28.52,28.81,28.73,28.97,28.93,28.98,28.875,28.73,28.665,28.78,28.825,28.945,28.925,29.085,29.48,29.34,29.37,29.32,29.23],[83.1,81.6595,81.405,79.47,77.71,77.75,76.9599,76.11,77.07,76.84,78.37,77.15,76.005,74.75,75.1399,75.7,76.36,75.23,76.67,77,78.64,77.3828,77.25,77.41,77.37,77.2572,78.335,77.87,77.925,78.465,77.1625,76.85,76.855,77.2621,76.1,75.73,75.945,75.64],[344.4,341.85,340.235,341.83,341.02,339.42,338.5,340.58,336.53,337.485,335.2655,335.04,337.3,336.78,336.045,336.17,336.57,337.205,337.74,338.11,338.5,338.225,339,338.22,339.57,339.45,338.37,337.93,338.38,338.58,339.38,339.715,340.07,339.035,337.68,337.41,337.61,337.79],[186.385,185.88,186,186.08,185.755,186.605,185.81,185.88,185.575,185.64,184.75,185.06,185.01,185.23,185.12,184.9175,184.84,184.2,183.9825,183.615,183.28,183.925,183.97,183.89,183.58,183.165,183.11,182.835,182.87,182.815,182.65,182.905,183.38,183.09,182.96,183.075,183.24,182.675],[5.97,5.92,5.92,5.905,5.87,5.865,5.825,5.845,5.825,5.825,5.81,5.805,5.815,5.81,5.78,5.765,5.755,5.735,5.74,5.74,5.745,5.755,5.74,5.745,5.74,5.705,5.67,5.675,5.685,5.685,5.64,5.66,5.695,5.685,5.685,5.685,5.69,5.635],[5.8,5.61,5.65,5.475,5.35,5.35,5.34,5.39,5.5,5.37,5.405,5.405,5.39,5.355,5.37,5.37,5.4144,5.4,5.41,5.52,5.5602,5.6242,5.565,5.575,5.5735,5.595,5.515,5.51,5.49,5.5399,5.5,5.45,5.49,5.48,5.51,5.52,5.295,5.4831]];

    // good
    const rightDatasets = [[36.8884,38.3268,38.94,41.5964,41.89,41.2392,41.325],[9.29,9.49,9.905,10.0101,9.8525,10.09,9.985],[8.17,8.203,8.35,8.06,8.1227,8.0999,7.963],[11.59,11.83,12.4242,12.85,12.805,12.855,12.82],[32.3952,33.5,33.6,34.5,35.74,35.055,35.21],[26.8,27.5602,27.685,27.9,28.7933,28.805,29.17],[67.0154,69.1606,69.8,71.3403,73.6951,72.58,73.25],[15.19,16.1595,16.21,16.7162,16.3637,16.6527,16.6],[13.18,13.4988,13.965,14.036,14.47,14.5,14.53],[5.4,5.51,5.6401,5.81,5.9,5.91,5.88],[12.14,12.4124,12.72,13.175,13.0446,12.8147,12.775],[7.63,7.6936,7.8408,8.1,8.35,8.15,7.9],[6.95,7.035,7.04,7.17,7.1,6.9061,6.8],[7.02,7.15,7.38,7.9,7.98,7.9408,7.4729],[17.37,17.85,18.0595,18.477,18.7459,19.4053,20.94],[22.47,23.14,23.9891,24.135,24.2,24.16,24.055],[7.97,8.0357,8.0948,8.325,8.432,8.49,8.65],[24.47,24.65,25.1,25.68,25.735,26.6597,27.175],[26.6799,27.2,27.435,29,29.705,29.88,30.9],[6.7288,6.7881,6.9188,7.22,7.0318,7.0788,7.4335],[56.6,57.41,58.06,60.84,63.58,61.34,61.67],[11.84,11.92,11.9653,11.99,12,12.04,11.985],[20,20.989,21.61,22.0001,21.889,20.7,20.7],[14.64,14.673,14.75,14.76,14.9,14.8216,14.8015]];

    function arrAve(arr) {
        let sum = 0;
        arr.forEach((n) => {
            sum += n;
        });
        return sum / arr.length;
    }

    const leftMaxDiffFractions = [];
    const leftMins = [];
    leftDatasets.forEach((day) => {
        let max = 0;
        let minsFound = 0;
        day.forEach((bar, i) => {
            if (i > 0 && i < day.length - 1) {
                const thisFraction = Math.abs(day[i] / day[i - 1]);
                if (thisFraction > max) {
                    max = thisFraction;
                }
                if (bar === Math.max(day[i - 1], bar, day[i + 1])) {
                    minsFound += 1;
                }
            }
        });
        leftMins.push(minsFound);
        leftMaxDiffFractions.push(max);
    });
    console.log(arrAve(leftMaxDiffFractions), Math.max(...leftMaxDiffFractions), Math.min(...leftMaxDiffFractions));

    const rightMaxDiffFractions = [];
    const rightMins = [];
    rightDatasets.forEach((day) => {
        let max = 0;
        let minsFound = 0;
        day.forEach((bar, i) => {
            if (i > 0 && i < day.length - 1) {
                const thisFraction = Math.abs(day[i] / day[i - 1]);
                if (thisFraction > max) {
                    max = thisFraction;
                }
                if (bar === Math.max(day[i - 1], bar, day[i + 1])) {
                    minsFound += 1;
                }
            }
        });
        rightMins.push(minsFound);
        rightMaxDiffFractions.push(max);
    });
    console.log(arrAve(rightMaxDiffFractions), Math.max(...rightMaxDiffFractions), Math.min(...rightMaxDiffFractions));

    const threshold = 1.04;
    let badsFound = 0;
    let goodsFound = 0;
    rightMaxDiffFractions.forEach((n) => {
        if (n > threshold) {
            goodsFound += 1;
        }
    });
    leftMaxDiffFractions.forEach((n) => {
        if (n > threshold) {
            badsFound += 1;
        }
    });

    console.log("goods found: " + goodsFound);
    console.log("bads found: " + badsFound);

    console.log("*********");
    rightDatasets.push(rightMins);
    leftDatasets.push(leftMins);

    function renderColumn(datasets, containerId, side) {
      const container = document.getElementById(containerId);

      datasets.forEach((data, i) => {
        // Create chart container
        const chartDiv = document.createElement("div");
        chartDiv.className = "chart-container";
        const canvas = document.createElement("canvas");
        chartDiv.appendChild(canvas);
        container.appendChild(chartDiv);

        // Create chart
        new Chart(canvas, {
          type: "line",
          data: {
            labels: data.map((_, idx) => idx + 1),
            datasets: [{
              label: `${side} Dataset ${i + 1}`,
              data: data,
              borderColor: side === "Left" ? "blue" : "green",
              backgroundColor: side === "Left"
                ? "rgba(0, 0, 255, 0.2)"
                : "rgba(0, 128, 0, 0.2)",
              fill: true,
              tension: 0.3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: { title: { display: true, text: "Index" } },
              y: { title: { display: true, text: "Value" } }
            }
          }
        });
      });
    }

    // Render both sides
    renderColumn(leftDatasets, "leftCol", "Left");
    renderColumn(rightDatasets, "rightCol", "Right");
  </script>
</body>
</html>